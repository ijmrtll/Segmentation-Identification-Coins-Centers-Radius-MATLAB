function ImaMorp = morpho(Ima) %Function to peform morphological operations if(not(isa(Ima, 'logical')))  ImaMorp = Ima;  printf('The image is not a binary image, it cannot be operated!!\n')  break endif  c = 'y'; while(c == 'y')  printf('\n');  printf('Which morpholigcal operation would you like to perform\n')  printf(' [0] Cancel\n')     printf(' [1] Dilation\n')  printf(' [2] Erosion\n')  printf(' [3] Opening\n')  printf(' [4] Closing\n');  printf('\n');  ope = input('Which morpholigcal operation would you like to perform? [1...4]: ');  printf('\n');  if ope == 0    ImaMorp = Ima;    break  endif  printf('Structuring Elements\n')  printf(' [1] Diamond\n')  printf(' [2] Disk\n')  printf(' [3] Octagon\n')  printf(' [4] Rectangle\n')  printf(' [5] Square\n')  printf(' [6] Arbitrary\n')  printf('\n');    SE = input('What type of structuring element would you like to use? [1...6]: ');  switch SE   case 1     R = input('Radius of the shape? ');     se = strel('diamond', R);     seN = 'Diamond';   case 2     R = input('Radius of the shape? ');     se = strel('disk', R, 0);     seN = 'Disk';    case 3     R = input('Radius of the shape? (multiple of 3) ');     se = strel('Octagon', R);       seN = 'Octagon';   case 4     MN = input('Size of the shape [M N]? ');     se = strel('rectangle', MN);      seN = 'Rectangle';      case 5     MN = input('Size of the shape? ');     se = strel('square', MN);     seN = 'Square';      case 6     nhood = input('Especify the shape: ');     se = strel('arbitrary', nhood);     seN = 'Arbitrary';   end  figure(7)  spy(getnhood(se), '.','b', 10); grid on;  title(['Structuring Element: ', seN])    switch ope   case 1     %Dilation     ImaMorp = imdilate(Ima, se, 'same');     morOpe = 'Dilation';     printf('Ok!\n')   case 2     %Erosion     ImaMorp = imerode(Ima, se, 'same');     morOpe = 'Erosion';     printf('Ok!\n')      case 3     %Opening     ImaMorp = imdilate(imerode(Ima, se, 'same'), se, 'same');     morOpe = 'Opening';          printf('Ok!\n')      case 4     %Closing     ImaMorp = imerode(imdilate(Ima, se, 'same'), se, 'same');     morOpe = 'Closing';          printf('Ok!\n')  end   figure(8)  %subplot(1,2,1)  %imshow(Ima, [0 1]);  %title('Original Thresholded Image');  %subplot(1,2,2)  imshow(ImaMorp, [0 1]);  title(['Morphologically Operated Image: ', morOpe ,' with strel: ', seN]);  while(true)    c = lower(input('Would you like to try a different operation? y/n: ','s'));    if(c == 'y')      break    else      msgbox('You are now working with a morphologically operated image!!');      break    endif  end  endend